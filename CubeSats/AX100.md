# AX100

**ESD Sensitive! Always use an ESD mat, wrist strap and gloves!**

## Quickstart

- Connect a dummy load or antenna. Small loads are not designed to be left
  operating for more than 2-3 minutes at a time. So just remember to let it cool
  off.
- The easiest way to access the AX100 is by its 4-pin debug connector.
  - **DO NOT power the FTDI power and external poewr supply simultaneously**
  - **The external power supply ground and PC/Laptop ground must be the same**
- Removing the EMI shield will void the warranty on the product.

## Console Interface

- Manual recommends `minicom`.
- Use `sudo minicom -s` and go to console settings. Setup baudrate to 500.000
  baud, 8n1, and disable flow-control. Save as default.
- Then run: `minicom -D /dev/ttyUSB0 -con`.

## Ports

| Port | Name              | Description                          |
| :--: | ----------------- | ------------------------------------ |
|  0   | CSP_CMP           | Control Port                         |
|  1   | CSP_PING          | Returns copy of the packet received  |
|  2   | CSP_PS            | Returns process list                 |
|  3   | CSP_MEMFREE       | Returns memory free                  |
|  4   | CSP_REBOOT        | Reboots subsystem                    |
|  5   | CSP_BUF_FREE      | Returns number of free buffers       |
|  6   | CSP_UPTIME        | Returns subsystem uptime             |
|  7   | AX100_PORT_RPARAM | Controls AX100 with parameter system |
|  8   | CSP_UPTIME        | Resets the AX100 ground WDT          |

- RPARAM port is used to service remote parameter get/set requests.
- The Ground WDT is a counter that'll count down to zero. If it reaches 0, it
  will delete the stored configuration from table zero and revert the AX100 back
  to running from the alternate boot file.

## Parameters

- A: Active Parameters. Checked by the firmware during execution. Changing them
  takes effect on the next execution of the codepath that uses it.
- B: Boot-up Parameters. This parameters can only be applied on system power-on.
  You must reboot the system for them to take effect.
- R: Read-only parameters. They can be written to, but the firmware will
  overwrite it at some later time. Only counters are an exception to this rule.
- P: Persistent Parameters. Will be stored each time they are changed in a
  separate memory location, allocated specifically for that single parameter.
  They are not overwritten when saving and loading parameters to/from a
  parameter table.

### System Configuration

This parameters should be set once for your mission. Most are boot time
configuration.

Some important params:

- **led_en**: Disable on-board leds.
- **rssi_offset**: Sets the RSSI indicator.
- **csp_node**: CubeSatProtocol address.
- **kiss_usart**: Set which USART to use KISS interface.
- **gosh_usart**: Set which USART to use for GOSH interface.
- **reboot_in**: Number of seconds before automatic reboot will happen.
- **csp_rtable**: CSP routing table in the CIDR format.
- **bcn_interval**: Number of seconds between beacon packets.

You can enable the following protocols:

- CAN
- I2C
- KISS
- GOSH

Glossary:

- **RSSI**: Received Signal Strength Indicator, values are negative. Closer to 0
  means higher strength.
- **I2C**: Inter-Integrated Circuit is a serial communication protocol. Commonly
  used for short-distance communication between microcontrollers.

### Receiver Configuration

This parameters are kept in table 1. These are all active parameters, so they
will take effect as soon as their are changed. You can change multiple params
using `rparam`.

Important params:

- **csp_hmac**: Enable HMAC (checksum and authentication).
- **csp_hmac_key**: HMAC key (needs to match transmitter).

Glossary:

- Baudrate: Number of signal changes or symbols transmitted per second.
- Reed-Solomon: Error correction algorithm.

### Transmitter Configuration

This configuration should be almost identical to the receiver configuration. All
parameters are active, which means they take effect right after being changed.

Important Params:

- ber: Injects random bit-errors in transmitted frames with this probability.
- pa_level: Input level for the PA, **DO NOT MODIFY**.

Glossary:

- PA: Pressure Altitude.

### Telemetry

Separate memory area allocated for telemetry data (EG: current temperatur, data
counters and bootcounter).
